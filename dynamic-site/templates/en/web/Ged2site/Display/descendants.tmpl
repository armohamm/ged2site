<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<!--
See http://stackoverflow.com/questions/39096205/family-chart-with-horizontal-and-vertical-line-connectors-using-vis-js
-->
<html lang="en">
    <head>
	<title>Descendents of [% person.title %]</title>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.19.1/vis.min.js"></script>
	<link rel="stylesheet" href="/css/web.css" type="text/css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.19.1/vis.min.css" />
        <style type="text/css">
          body {
              font: 10pt sans;
          }

          #network {
              width: 100%;
              height: 600px;
	      // height: Math.round($(window).height() * 0.80) + 'px';
              background: white;
              border: 1px solid lightgray;
          }
	  /*div.vis-tooltip { font-size:10px; white-space: normal; width: 30em; word-wrap: break-word; }*/
	div.vis-tooltip {
		font-size: 10px;
		white-space: normal;
		width: 30em;
		max-width: 300px;
		word-wrap: break-word;
		padding: 5px;
	}
      </style>
        <script type="text/javascript">
            function main() {
		[% graph %]

                var options = {
                  nodes: {
                    borderWidth: 1,
                    borderWidthSelected: 1,
                    shape: "box",
                    color: {
                      border: 'lightgray',
                      background: 'white',
                      highlight: {
                        border: 'lightgray',
                        background: 'lightblue'
                      },
                      hover: {
                        border: 'lightgray',
                        background: 'lightblue'
                      }
                    }
                  },
                  edges: {
                    smooth: {
                      type: 'cubicBezier',
                      forceDirection: 'vertical',
                      roundness: 1
                    },
                    color: 'lightgray'
                  },
                  layout: {
                    hierarchical: {
                      direction: 'UD',
                      nodeSpacing: 150
                    }
                  },
                  interaction: {dragNodes :false},
                  physics:false,
		  interaction: {
			navigationButtons: true,
			keyboard: true
		}
                  };
                var network = new vis.Network(document.getElementById("network"), graph, options);
                network.on("click", function(params) {
			var node = graph.nodes.get(params.nodes[0], 'URL');
			window.open(node.URL,'_blank');
                });
            }
        </script>
    </head>
    <body onload="main();">
	<center>
		<h1>Descendents of [% person.title %]</h1>
		[ <a href="?page=people&home=1">Home</a> ] |
		[ <a href="?page=censuses">Census Index</a> ] |
		[ <a href="?page=surnames">Surname Index</a> ] |
		[ <a href="?page=history">Family History</a> ] |
		[ <a href="?page=todo">To Do</a> ] |
		[ <a href="?page=calendar">Calendar</a> ] |
		[ <a href="/visjs.html">Timeline</a> ]
	</center>
	<font size=+1>
		<p>
		Click and move the mouse to move around the tree, and use
		the mouse wheel to zoom in and out, or use the green icons.
		Only people with known birth dates are shown.
		<p>
		Hover over a person to see their biography,
		click a person to go to their page.
	</font>
        <div id="network"></div>
	        <p align="right">
		<font size=+1>
			<i>
				This website was generated by <a href="https://github.com/nigelhorne/ged2site">ged2site</a>.
				[% IF updated %]
					[% USE date %]
					Last updated on [% date.format(time = updated, format = '%d %b %Y', locale = lingua.language_code_alpha2) %]
					[% END %]
														</i>
												</font>
		</p>
    </body>
</html>
